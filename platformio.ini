; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
default_envs = esp32-c3-devkitm-1

; Common build settings
[env]
platform = espressif32@6.4.0
framework = arduino
monitor_speed = 115200
lib_deps =
    ; Use GitHub source when registry package isn't available on Windows
    https://github.com/jgromes/RadioLib.git
    ; HTTP client for IPFS gateway access (lightweight)
    ; Note: ESP32 core includes HTTPClient, but we may need additional libraries
    ; For HAM modem: KISS is already implemented, no additional library needed
build_flags =
    -I include/include
    -Os
build_src_filter =
    +<*>
    +<../include/include/>

; ESP32-C3
[env:esp32-c3-devkitm-1]
board = esp32-c3-devkitm-1
board_build.mcu = esp32c3
board_build.f_cpu = 160000000L
board_build.f_flash = 40000000L
board_build.flash_mode = dio
board_build.partitions = huge_app.csv

; ESP32 (original)
[env:esp32dev]
board = esp32dev
board_build.partitions = huge_app.csv

; ESP32-S2
[env:esp32-s2-devkitm-1]
board = esp32-s2-saola-1 ; esp32-s2-devkitm-1 not available in this PIO core; using Saola-1 as closest dev board
board_build.partitions = huge_app.csv

; ESP32-S3
[env:esp32-s3-devkitc-1]
board = esp32-s3-devkitc-1
board_build.partitions = huge_app.csv

; ESP32-C5 (when available)
[env:esp32-c5-devkitm-1]
; board = esp32-c5-devkitm-1
; NOTE: ESP32-C5 board ID not available in this PlatformIO installation.
; Commented out to avoid UnknownBoard build failures. Re-enable when your PIO core supports C5 boards.
; board_build.partitions = huge_app.csv

; ESP32-C6
[env:esp32-c6-devkitc-1]
; board = esp32-c6-devkitc-1
; NOTE: ESP32-C6 may not support the Arduino framework on this PIO core; building for C6 can fail with
; "doesn't support arduino framework". Commented out to keep CI/builds stable. Re-enable when
; Arduino core for ESP32-C6 is available or switch this env to `framework = espidf` and adapt code.
; board_build.partitions = huge_app.csv

; ============================================================================
; Heltec LoRa32 V2 (ESP32 original based)
; ============================================================================
; This is the Heltec WiFi LoRa 32 V2 board with:
; - ESP32 (Xtensa dual-core)
; - SX1276 LoRa radio (868/915 MHz)
; - Built-in OLED display (SSD1306, 128x64)
; - Bluetooth Classic support
; - Vext power control on GPIO21
[env:heltec_wifi_lora_32_V2]
board = heltec_wifi_lora_32
board_build.partitions = huge_app.csv
build_flags =
    ${env.build_flags}
    -DHELTEC_LORA32_V2
    -DLORA_ENABLED
; Optional: Add OLED support
; build_flags =
;     ${env.build_flags}
;     -DHELTEC_LORA32_V2
;     -DLORA_ENABLED
;     -DOLED_ENABLED

; ============================================================================
; Heltec LoRa32 v3 (ESP32-S3 based)
; ============================================================================
[env:heltec_wifi_lora_32_V3]
board = heltec_wifi_lora_32_V3
board_build.partitions = huge_app.csv
build_flags =
    ${env.build_flags}
    -DHELTEC_LORA32_V3
    -DLORA_ENABLED

; ============================================================================
; Heltec LoRa32 v4 (ESP32-C6 based)
; ============================================================================
[env:heltec_wifi_lora_32_V4]
; board = heltec_wifi_lora_32_V4
; NOTE: Heltec V4 board ID not available in this PIO core. Use V3 or update PIO packages.
; board_build.partitions = huge_app.csv
; build_flags =
;     ${env.build_flags}
;     -DHELTEC_LORA32_V4
;     -DLORA_ENABLED

; Example: Enable HAM modem support (add to any environment)
; build_flags = ${env.build_flags} -DHAM_MODEM_ENABLED

; Example: Enable IPFS support (add to any environment)
; build_flags = ${env.build_flags} -DIPFS_ENABLED

; Example: Enable all features
; build_flags = ${env.build_flags} -DLORA_ENABLED -DHAM_MODEM_ENABLED -DIPFS_ENABLED

